config:
  target: 'http://localhost:4000'
  phases:
    - duration: 1
      arrivalRate: 5500 # 5500 rps * 1s = 5500 requests
      name: Burst ~5k requests
  defaults:
    headers:
      Content-Type: 'application/json'
      Authorization: 'Basic YWRtaW46YWRtaW4='
  plugins:
    metrics-by-endpoint: false

scenarios:
  - name: 'Burst 5000 concurrent requests'
    flow:
      - post:
          url: '/scrape'
          json:
            urls:
              - 'https://picsum.photos'
          expect:
            - statusCode: 202
